{% extends "utilities/base.html" %}

{% block content %}

{% for instance in instances %}
	<div class="tile">
		<img class="tile-img" src="{{instance.thumbnail.url}}" alt="" 
			onclick="gomodal(this, '{{instance.pk}}', '{{instance.title}}')">
		<p class="p-title">
			<i class="{{instance.icon}} fa-lg" aria-hidden="true"></i>
			<a 
				href = "{% url instance.edit_url instance.pk %}"
				role = "button">
				{{instance.title|truncatechars:35}}
			</a>
		</p>
	</div>
{% endfor %}

<div class="modal" id="myModal">
  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
	<img id="modal-img" class="big-img" src="/media/thumbnail/Pulp_Fiction_1994_poster.jpeg">
	<p id="modal-title" class="modal-title">Some text in the Modal..</p>
  </div>

</div>
<button id="myBtn">Open Modal</button>

<script>
var tiles= document.getElementsByClassName('tile-img')
for ( i =0; i < tiles.length; i++ ){
	tile= tiles[i];
	console.log(tile);
}
	
// Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal
btn.onclick = function() {
  modal.style.display = "block";
}

function gomodal(img, pk, title) {
	console.log(title);
	console.log(pk);
	var modal_title = document.getElementById("modal-title");
	var modal_img= document.getElementById("modal-img");
	var x = modal.qu
	console.log(modal);
	console.log(img);
	console.log(modal_img);
	console.log(modal_title);
	modal_title.innerText = title;
	modal_img.src = img.src;
	modal.style.display = "block";
}


// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
</script>

<style>

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.85); /* Black w/ opacity */
}

/* Modal Content/Box */
.modal-content {
  background-color: black;
  margin-left: auto; /* 15% from the top and centered */
  margin-right: auto; /* 15% from the top and centered */
  margin-top: 5%; /* 15% from the top and centered */
  padding: 20px;
  width: 90%; /* Could be more or less, depending on screen size */
  height: 75%; /* Could be more or less, depending on screen size */
}

/* The Close Button */
.close {
	display:none;
}

.modal-title {
	color:white;
	font-size: 150%;
	justify:center;
	margin-left:auto;
	margin-right:auto;
	margin-top:auto;
}


.tile {
	display:inline-block;
	height:250px;
	width:250px;
	background-color: #f0f0f0;
	margin-top:5px;
	margin-left:3px;
}

.big-img {
	display: block;
	margin-left: auto;
	margin-right: auto;
	margin-top: auto;
	margin-bottom: auto;
	max-width:100%;
	height:auto;
	object-fit:contain;
	width:240px;
	justify:center;
}

img {
	border-radius:8px;
	width:240px;
	height:210px;
	object-fit:cover;
	padding:0px;
	margin:5px
}

i {
	margin-left:5px;
}

a {
	display:inline-block;
	color:black;
	margin-left:5px;
}

p {
	font-family: "Georgia", serif;
	font-size: small;
	margin-top: 3px;
}

</style>

{% endblock %}

